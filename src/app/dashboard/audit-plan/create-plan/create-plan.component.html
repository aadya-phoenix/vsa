<section class="content">
    <div>
        <div class="row">
            <div class="col-md-12">
                <div class="card card-default">
                    <div class="card-header">
                        <div class="d-flex justif_space_betwen">
                            <h3 class="card-title">Create Plan Details</h3>
                            <div class="d-flex">
                                <input type="file" (change)="bulkUpload($event)" id="upload" />
                                <!-- <div class="upload-btn-wrapper">
                                    <button class="btn button-upload btn-primary"> <i
                                            class="fas fa-upload mr-1 upload_ico"></i>
                                        <span class="now_rap">Upload Plan</span></button>
                                    <input type="file" name="myfile" />
                                </div> -->
                                <button class="btn btn-success d-flex align-items-center ml-1" (click)="download()">
                                    <i class="fas fa-download mr-1 upload_ico"></i>
                                    <span class="now_rap">Download Template</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <form [formGroup]="createPlanForm">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Vendor Code <span class="start_css">*</span></label>
                                        <ng-select (change)="getVendor($event)" [items]="vendorObj" bindLabel="code" 
                                            bindValue="id" formControlName="vendorId" class="form-control inputbox_css"
                                            (search)="searchVendor($event.term)">
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Vendor Name <span class="start_css">*</span></label>
                                        <ng-select (change)="getVendor($event)" [items]="vendorObj" bindLabel="name"
                                            bindValue="id" formControlName="vendorId"
                                            class="form-control inputbox_css ">
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Location <span class="start_css">*</span></label>
                                        <select class="form-control inputbox_css " formControlName="locationId">
                                            <option></option>
                                            <option *ngFor="let item of locationObj" [value]="item.id">{{item.name }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">
                                            Auditee Email Id <span class="start_css">*</span>
                                        </label>
                                        <input type="email" class="form-control" formControlName="auditeeEmail">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Vendor Category <span
                                                class="start_css">*</span></label>
                                        <ng-select [items]="categoryObj"
                                            bindLabel="categoryName" bindValue="id" formControlName="vendorCategoryId"
                                            class="form-control inputbox_css ">
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Any Other Location</label>
                                        <input #otherLocation type="text" class="form-control inputbox_css "
                                            formControlName="otherLocation"
                                            (input)="otherLocation.value = otherLocation.value.toUpperCase()"
                                            placeholder="Type Any Other location">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Any Other Code</label>
                                        <input type="text" class="form-control inputbox_css mt_3"
                                            placeholder="Type Any Other Code" formControlName="otherCode">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Type Code</label>
                                        <input type="text" class="form-control inputbox_css " placeholder="Type Code"
                                            formControlName="typeCode">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Type Name</label>
                                        <input type="text" class="form-control inputbox_css " placeholder="Type Name"
                                            formControlName="typeName">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Type Location</label>
                                        <input type="text" class="form-control inputbox_css "
                                            placeholder="Type location" formControlName="typeLocation">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Planned Start Date <span
                                                class="start_css">*</span></label>
                                        <input type="date" class="form-control inputbox_css mt_3"
                                            formControlName="plannedStartDate" [min]="minStartDate">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">Planned End Date <span
                                                class="start_css">*</span></label>
                                        <input type="date" class="form-control inputbox_css mt_3"
                                            formControlName="plannedEndDate"
                                            [min]="createPlanForm.controls['plannedStartDate'].value">
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">
                                            Additional MSIL Email
                                        </label>
                                        <input type="text" class="form-control inputbox_css "
                                            placeholder="Enter Auditee MSIL email"
                                            formControlName="additionalMSILEmail">
                                    </div>
                                </div>

                                <div class="col-sm-3">
                                    <div class="form-group">
                                        <label class="form_label">
                                            Upload File
                                        </label>
                                        <input type="file" (change)="onFileSelected($event)"
                                            formControlName="attachment" class="form-control inputbox_css ">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button type="button" class="btn btn-primary" (click)="submit()">Submit</button>
                            <button type="button" class="btn btn-default" (click)="close()">Close</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>